## 블록체인 개요

#### 블록체인이란?

- 블록과 체인의 합성어로 거래 내역이 담긴 블록을 체인처럼 엮어서 저장하는 기술
- 다른 말로 분산원장기술라고도 함
- 비트코인 등 암호화폐의 기반이 되는 기술



#### 블록의 연결

- 블록은 순서대로 연결되며
- 이전 블록의 해시값을 가지고 있다.



#### 중앙 집중 원장과 분산 공유 원장

- 중앙 집중 원장
  - 중앙에 고성능/대용량 시스템 구축
  - 모든 거래와 비즈니스 관련 정보를 한 곳에서 공유 및 관리
  - 구축 및 운영에 많은 비용 소모
  - 중앙 서버가 공격당하면 시스템 마비
- 분산 원장
  - 데이터 전부를 해당 서비스 네트워크에 참여한 모든 주체가 동일하게 복제하여 공유하고 관리
  - 한번 기록된 데이터를 위변조 하기 위해서는 그 이후에 기록된 

#### 블록체인 장부의 조작

- 장부의 조작
  - 내가 가진 돈보다 더 큰 금액을 사용
    - 유효성 검증에서 통과하지 못함
  - 이미 썼던 내용을 없애고 다시 사용
    - 이미 썼던 내용은 이전 블록 어딘가에 저장
    - 해당 블록을 위조하기 위해서는 그 이후 모든 블록에 수정이 들어가야함
- 공격자 입장
  - 블록을 생성하거나 조작하기 위해서는 더 많은 컴퓨팅 파워가 필요(비용 발생)
  - 더 많은 비용을 들였다고 해서 블록 생성 권한을 얻는다는 보장이 없음
  - 특정 블록을 수정하면 그 블록에 연결된 체인이 다른 사람들이 가진 체인보다 더 길어야 네트워크에서 살아남음



#### 블록체인의 특징

- 블록은 순서에 따라 정렬되어 연결된다.
  - 최초의 블록부터 현재까지 발생 순서에 따라 계속 연결되고 있다. 
  - 각 블록은 이전 블록의 정보를 포함하고 있어 블록이 블록 체인 중간의 한 블록을 수정하면 그 뒤의 모든 블록에 영향을 미친다. 
  - 시간이 지날수록 이전 데이터의 수정이 어려워진다.
- 분산형 원장 구조이다.
  - 모든 참여자가 각자의 컴퓨터에 블록 체인을 저장하고 있다.
  - 일부 컴퓨터가 고장이 나거나 공격을 받더라고 정상적인 다른 노드들에 의해 시스템이 계속 운영될 수 있으며, 복구가 가능하다.
  - 실제 비트코인은 10년 이상 한번도 멈춘 적이 없다.
  - 중앙 서버 구축이 필요 없기 때문에 시스템 구축 비용이 저렴하다. 





#### 블록체인 기술의 장점

- 첫째, 신뢰성을 보장할 제 3자가 필요없다.
  - 분산화된 네트워크 노드가 합의를 통해 거래를 검증
- 둘째, 해킹에 안전하다.
  - 모든 사용자가 거래 장부를 가지고 있기 때문에 위/변조가 어려움
  - 네트워크 일부에 문제가 생겨도 가용성에 문제가 발생하지 않음
  - 분산처리 구조이기 때문에 DDoS 같은 공격에도 안전
- 셋째, 거래내역이 투명하게 보관된다.
  - 모든 거래내역을 공유하기 때문에 기존 금융거래보다 투명하다.
- 넷째, 경제성이 뛰어나다.
  - 기존 중앙집중적 조직의 유지보수, 보안에 드는 비용 절감
  - 참여자간 직접 거래로 수수료 절감



#### 블록체인 단점

- 첫째, 거래 속도가 느리다.
  - P2P 서비스로 다수의 사용자가 합의를 위해 정보공유가 필요
- 둘째, 기록된 데이터를 수정하기 어렵다
- 셋째, 저장공간의 한계
- 넷째, 프라이빗 키 분실위험
  - 프라이빗 키를 잃어버리면 인출 불가



## 블록체인 핵심 원리

- P2P 네트워크
  - 퓨처 P2P
  - 하이브리드 P2P
- 해시 연산
  - 데이터의 무결성을 보장하는 기술
    - 무결성은 데이터를 쉽게 변조할 수 없으며
    - 변조했다고 하더라도 그 사실을 바로 알아 차릴 수 있는 특성
  - 해시(디지털 지문)
    - 특정한 데이터를 이를 상징하는 고정 길이의 데이터로 변환
    - 원래의 데이터가 조금만 달라져도 확연하게 달라지는 특성
    - 복호화(역변환) 불가, 비가역 함수
- 블록 (헤더 + 트랜잭션)
  - 유효한 트랜잭션들의 집합, 블록체인 작업증명의 결과
  - 블록체인의 블록은 블록헤더 + 트랜잭션으로 구성
  - 트랜잭션의 정보의 무결성 검증을 위해 머클 트리 사용
- 합의 알고리즘 
  - 합의내용
    - 블록 생성 권한을 누구에게 줄 것인가
    - 체인 분기 발생 시 메인 체인을 선택하는 방법 (나카모토 합의)
  - 합의 알고리즘의 종류
    - PoW(Proof Of Work): 작업 증명
    - PoS(Proof Of Stake): 지분 증명
    - DPoS(Delegated Proof of Stake): 위임 지분 증명
  - 작업증명(PoW) 알고리즘
    - 동작원리
      - 서비스 제공자가 제시한 특정 작업을 완료해야 사용자가 서비스 이용 가능
      - 작업을 하기는 어려워도 '작업 완료' 검증은 쉬운 작업
- 작업 증명
  - 비트코인에서는 작업증명(PoW) 방식의 합의 알고리즘 사용
  - 해당 블록 헤터의 해시값이 특정 범위 안에 들도록 하는것이 작업 과제
  - 해시값은 예측이 불가능 하기 때문에 입력을 조금씩 바꿔가며 다시 연산을 해보는 수 밖에 없음
- 전자 서명
  - 사용자 별로 개인키와 공개키로 이루어진 키의 쌍이 존재
  - 송신자의 개인키로 암호화 하면 수신자는 송신자의 공개키로 복호화 가능
  - 키 교환 없이 안전하게 데이터를 수신할 수 있음
  - 트랜잭션의 부인방지에 사용
- 블록 생성 및 전파
  - 거래 발생 시 모든 사용자에게 전파
  - 각 사용자는 새로운 거래 내역을 블록에 취합
  - 각 사용자는 해당 블록에 대한 작업 증명 시도